{{define "footer"}}
<div class="container">
    <div class="footer">
        TimeChip.cz 2004-2020
    </div>
</div>
</div> <!-- konec wrapper-->

<script type="text/javascript" src="/static/js/jquery-1.11.1.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap-table.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.twitter.autolink.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.bxslider.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="/static/js/messages_cs.min.js"></script>
<script type="text/javascript" src="/static/js/underscore.js"></script>
<script type="text/javascript" src="/static/js/backbone.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
<script type="text/javascript" src="/static/js/default.js"></script>
<script>
    $(document).ready(function() {
        $(".twee").twitter_autolink();

        $('.bxslider').bxSlider({
            auto:true,
            mode:'fade',
            pager:false,
            controls:false,
            speed:5000,
            useCSS:false,
            randomStart:true
        });


        $('form').validate({
            rules: {
                jmeno: {
                    minlength: 2,
                    maxlength: 50,
                    required: true
                },
                telefon: {
                    minlength: 9,
                    maxlength: 30,
                    required: true
                },
                email: {
                    required: true,
                    email: true,
                    minlength: 5,
                    maxlength: 100
                },
                zprava: {
                    minlength: 5,
                    required: true
                }
            },


            highlight: function(element) {
                $(element).closest('.form-group').addClass('has-error');
            },
            unhighlight: function(element) {
                $(element).closest('.form-group').removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });

    })
</script>
<script>
    $.fn.serializeObject = function() {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

var Contact = Backbone.Model.extend({
   url: '/kontakt/kontaktni-formular'
});

var FormContact = Backbone.View.extend({
    el: '#form-contact-wrapper',
    events : {
        'submit #form-contact' : 'formContactHandler'
    },
    formContactHandler : function(ev){
        var messageDetails = $(ev.currentTarget).serializeObject();

        var self = this;
        this.model.fetch({data:messageDetails}).done(function(res){
            self.render(res);
        });
        ev.preventDefault();
    },

    render: function(res){
        this.$el.html('<p>'+res.zprava+'</p>');
    }

});


var contact = new Contact();
var formContact = new FormContact({
    model: contact
});
Backbone.history.start();
</script>
</body>
</html>
{{end}}